<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.rds.adams.web.wrk.bat.dao.WRKBAT002M0DAO">
    <select id="selectList" parameterType="com.rds.adams.web.wrk.bat.dto.WRKBAT002M0P0DTO" resultType="com.rds.adams.web.wrk.bat.dto.WRKBAT002M0R0DTO">
	   SELECT
			  A.BAT_PROG_ID       AS BAT_PROG_ID
			, A.BAT_PROG_NM       AS BAT_PROG_NM
			, A.UP_PROG_ID        AS UP_PROG_ID
			, A.LWST_PROG_YN      AS LWST_PROG_YN
			, A.EXE_PRD           AS EXE_PRD
			, B.USR_NM            AS MAIN_EMP_NO
			, B.USR_NM            AS SUB_EMP_NO
			, A.ETC_DESC          AS ETC_DESC
			, A.USE_YN            AS USE_YN
			, B.USR_NM            AS FRST_REG_EMP_NO
			, A.FRST_REG_DTM      AS FRST_REG_DTM
		 FROM TB_BAT_MNG_LST A 
		 LEFT OUTER JOIN TB_USR_MNG_LST B 
		   ON A.FNL_UPD_EMP_NO = B.USR_ID
		WHERE 1=1
		<if test='csNo != "999"'>
			AND A.CS_NO = #{csNo}
		</if>
         <if test='searchTxt != ""'>
           AND (
                	A.BAT_PROG_ID LIKE '%' + #{searchTxt} + '%'
                OR	A.BAT_PROG_NM LIKE '%' + #{searchTxt} + '%'
                )
         </if>
         <if test='exePrdList != null and exePrdList.length != 0'>
           AND EXE_PRD IN
           <foreach collection="exePrdList" item="exePrd" separator="," open="(" close=")">
                  #{exePrd}
           </foreach>
         </if>
    </select>
</mapper>