<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.rds.adams.web.core.dao.TbUserRoleDao">
    <select id="selectListUserRoleByUserId" parameterType="com.rds.adams.web.core.dto.TbUserRoleDto" resultType="com.rds.adams.web.core.dto.TbUserRoleDto">
        SELECT
			   A.USER_ID AS USER_ID
			   , A.ROLE_ID AS ROLE_ID
			   , B.USER_NAME AS USER_NAME
			   , B.PASSWORD AS PASSWORD
			   , C.ROLE_DESC AS ROLE_DESC
			   , TO_CHAR(A.CREATED_DATE, 'YYYYMMDD') AS CREATED_DATE
			   , A.CREATED_BY AS CREATED_BY
		  FROM TB_USER_ROLE A, TB_USER B, TB_ROLE C
		 WHERE 1=1
		   AND A.USER_ID = B.USER_ID
		   AND A.ROLE_ID = C.ROLE_ID
		   AND A.USER_ID = #{userId}
    </select>
    
    <select id="selectUserRoleByUserIdRoleId" parameterType="com.rds.adams.web.core.dto.TbUserRoleDto" resultType="com.rds.adams.web.core.dto.TbUserRoleDto">
        SELECT
			   A.USER_ID AS USER_ID
			   , A.ROLE_ID AS ROLE_ID
			   , B.USER_NAME AS USER_NAME
			   , B.PASSWORD AS PASSWORD
			   , C.ROLE_DESC AS ROLE_DESC
			   , TO_CHAR(A.CREATED_DATE, 'YYYYMMDD') AS CREATED_DATE
			   , A.CREATED_BY AS CREATED_BY
		  FROM TB_USER_ROLE A, TB_USER B, TB_ROLE C
		 WHERE 1=1
		   AND A.USER_ID = B.USER_ID
		   AND A.ROLE_ID = C.ROLE_ID
		   AND A.USER_ID = #{userId}
		   AND A.ROLE_ID = #{roleId}
    </select>
    
    <insert id="insertUserRole" parameterType="com.rds.adams.web.core.dto.TbUserRoleDto">
		INSERT INTO TB_USER_ROLE (
			USER_ID
			, ROLE_ID
			, CREATED_DATE
			, CREATED_BY
		) VALUES (
			#{userId}
			, #{roleId}
			, SYSDATE
			, #{createdBy}
		)
	</insert>
</mapper>