<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.rds.adams.web.WRK.FIL.dao.WRKFIL002M0DAO">
    <select id="selectList" parameterType="com.rds.adams.web.WRK.FIL.dto.WRKFIL002M0P0DTO" resultType="com.rds.adams.web.WRK.FIL.dto.WRKFIL002M0R0DTO">
        SELECT /*TODO 추후 공통으로 빼놓기*/
               A.SEQ_NO
             , A.FILE_NM
             , A.DB_ID
             , A.TBL_ID
          FROM TB_UPL_FILE_LST A
         WHERE 1=1
           AND A.USE_YN = 'Y'
         <if test='dummyStr != ""'>
           AND 1=1
         </if>
    </select>
    <insert id="insertList" parameterType="com.rds.adams.web.WRK.FIL.dto.WRKFIL002M0P1DTO">
        INSERT INTO [dbo].[TB_UPL_ITM_LST] (
            [TBL_ID],                 -- 테이블ID
            [ITM_NM],                 -- 칼럼명
            [CLMN_ID],                -- 칼럼ID
            [DATA_TP_CD],             -- 데이터타입ID
            [PK_YN],                  -- PK여부
            [VLVL_VRF_YN],            -- 유효값검증여부
            [VLVL_CD],                -- 유효값코드
            [ORD_SEQ],                -- 정렬순서
            [ITM_DSC],                -- 항목설명
            [SEL_BAS_YN],             -- 조회기준여부
            [REG_USRID],
            [REG_DT],
            [UPD_USRID],
            [UPD_DT]
        )
        VALUES (
            #{tblId},                 -- 테이블ID
            #{itmNm},                 -- 칼럼명
            #{itmId},                 -- 칼럼ID
            #{dataTpCd},              -- 데이터타입ID
            #{pkYn},                  -- PK여부
            #{vlvlVrfYn},             -- 유효값검증여부
            #{vlvlCd},                -- 유효값코드
            #{ordSeq},                -- 정렬순서
            #{itmDsc},                -- 항목설명
            #{selBasYn},              -- 조회기준여부
             'admin',
            CONVERT(CHAR(10), getdate(), 23),
            'admin',
            CONVERT(CHAR(10), getdate(), 23)
        );
    </insert>
    <update id="updateList" parameterType="com.rds.adams.web.WRK.FIL.dto.WRKFIL002M0P1DTO">
        UPDATE TB_UPL_ITM_LST
           SET ITM_NM = #{itmNm},                 -- 칼럼명
               DATA_TP_CD = #{dataTpCd},          -- 데이터타입ID
               PK_YN = #{pkYn},                   -- PK여부
               VLVL_VRF_YN = #{vlvlVrfYn},        -- 유효값검증여부
               VLVL_CD = #{vlvlCd},               -- 유효값코드
               ORD_SEQ = #{ordSeq},               -- 정렬순서
               ITM_DSC = #{itmDsc},               -- 항목설명
               SEL_BAS_YN = #{selBasYn}           -- 조회기준여부
         WHERE 1=1
           AND TBL_ID = #{tblId}                  -- 필터링기준 : 테이블ID
           AND CLMN_ID = #{itmId}                 -- 필터링기준 : 컬럼ID
    </update>
    <delete id="deleteList">
        DELETE TB_UPL_ITM_LST
         WHERE 1=1
           AND TBL_ID = #{tblId}                  -- 필터링기준 : 테이블ID
           AND CLMN_ID = #{itmId}                 -- 필터링기준 : 컬럼ID
    </delete>
</mapper>